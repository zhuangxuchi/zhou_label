<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
			* {
				margin:0;
				padding:0;
			}
        a{
            list-style:none;
            text-decoration: none;
            font-weight:bold;
            color: #8a8a8a;
        }
        a:hover{
            border:transparent;
            outline:none;
        /*取消虚线框*/
        }
        html, body{
            background-color: #f0d6d7;
            height:100%;
        }
        .container{
            padding:0;

            position: absolute;
            top: -30px;
            height:100%;
            width:100%;
            justify-content:center;
            align-items:center;
            display:flex;}
        .text{
            /*文字*/
            padding:0;
            font-weight:bold;
            font-size:50px;
            color: #656565;
        }
        .dud{
            color:#757575;}

				.name {
					color: #8a8a8a;
					font-size: 40px;
					font-weight:bold;
					position: relative;
					width: 260px;
					position: absolute;
					left:20% ;
					top:38%;
					/*padding:0;*/
				}
				.name span {
					color: #8a8a8a;
					display: inline-block;
					padding:0;
					margin-right: 10px;
					
				}
				.name span:first-child {
					font-size: 60px;
					font-weight:bold;
					/*display: inline-block;*/
				}
			  .name span:nth-child(2) {
					font-size: 30px;
				}
			  #start {
					position: absolute;
					left:30%;
					top:54%;
					width: 400px;
					height: 90px;
					background: #33d5aa;
					border-radius: 4px;
					border:transparent;
					box-shadow: 2px 2px 5px #888888;
					opacity:0;
					color: #f5f5f5;
					font-size: 30px;
					z-index:100;
				}
			#end {
				opacity:0;
				position: absolute;
				left:40%;
				top:54%;
				width: 400px;
				height: 64px;
				color: #898989;
				font-size: 30px;
			}
			#end span {
				display: inline-block;
				vertical-align: top;
				height: 64px;
				line-height: 64px;
			}
    </style>
</head>

<body style="background-color:#f0d6d7;height:100%;">
<div class="e"><span>T</span><span>o:</span>智慧宝宝</div>
<button id="start">
	<a href="#">
		<div></div>
	</a>
</button>
<p id="end">
	<img src="heart.png" alt="">
	<span></span>
</p>
<div class="container">
    <!--<button>sdsf</button>-->
    <div class="text"></div>
</div>




<script>
    // ——————————————————————————————————————————————————
    // TextScramble
    // ——————————————————————————————————————————————————

    class TextScramble {
        constructor(el) {
            this.el = el
            this.chars = '!<>-_\\/[]{}—=+*^?#________'
            this.update = this.update.bind(this)
        }
        setText(newText) {
            const oldText = this.el.innerText;
            const length = Math.max(oldText.length, newText.length);
            const promise = new Promise((resolve) => this.resolve = resolve);
            this.queue = [];
            for (let i = 0; i < length; i++) {
                const from = oldText[i] || '';
                const to = newText[i] || '';
                const start = Math.floor(Math.random() * 40);
                const end = start + Math.floor(Math.random() * 40);
                this.queue.push({ from, to, start, end });
            }
            cancelAnimationFrame(this.frameRequest);
            this.frame = 0;
            this.update();
            return promise;
        }
        update() {
            let output = ''
            let complete = 0
            for (let i = 0, n = this.queue.length; i < n; i++) {
                let { from, to, start, end, char } = this.queue[i]
                if (this.frame >= end) {
                    complete++
                    output += to
                } else if (this.frame >= start) {
                    if (!char || Math.random() < 0.28) {
                        char = this.randomChar()
                        this.queue[i].char = char
                    }
                    output += `<span class="dud">${char}</span>`
                } else {
                    output += from
                }
            }
            this.el.innerHTML = output
            if (complete === this.queue.length) {
                this.resolve()
            } else {
                this.frameRequest = requestAnimationFrame(this.update)
                this.frame++
            }
        }
        randomChar() {
            return this.chars[Math.floor(Math.random() * this.chars.length)]
        }
    }

    const phrases = [
		  '智慧宝宝  你好呀',	
			'这是一段来自 2000km 外的问候',
      'em.......',
      '我觉得我该说点什么',
			'说点啥呢',
      '我来个自我介绍吧',
      '我呢，叫周博文',
      '按照惠州的叫法',
      '你可以叫我吖博',
      '“博” 是第四声哈~',
      '可能，直到昨天晚上',
      '我们才知道对方的存在',
      '我们那两位可爱的母亲大人',
      '就这么在中间架了一座桥',
      '然后我们就是微信好友了',
			'不管是什么认识的方式',
      '很开心  认识你',
    ];

    const el = document.querySelector('.text');
    const fx = new TextScramble(el);

    let counter = 0;
    const next = () => {
        fx.setText(phrases[counter]).then(() => {
            if(counter <= 17){
                setTimeout(next, 1800);
            } else {
              	enter();
                setTimeout(function(){console.log(0);},1200);
//              setTimeout(function(){alert(1);},1000);
            }
        });
//        counter = (counter + 1) % phrases.length
//        if(counter < 2) {
            counter = counter + 1;
//        }

//        alert(1);
    };

    function enter(){

      var btn = document.getElementById('start');
      var end = document.getElementById('end');
//			btn.style.opacity = 1;
      show(btn);
//      hide(btn);
			btn.onclick = function() {
        hide(btn);
//        setTimeout( function(){ }, 3000 );
        show(end);
			};


//      a1.href = "https://thomaszhou63.github.io/zhou_label/main.html";

    }
    var Fadeflag = true;
    function show(obj) {
      var num = 0;
      if (Fadeflag) {
        var st = setInterval(function(){
          num++;
          Fadeflag = false;
          obj.style.opacity = num/10;
          if (num>=10) {
            clearInterval(st);
            Fadeflag = true;
          }
        },30);
      }
    }
    function hide(obj) {
      var num = 10;
      if (Fadeflag) {
        var st = setInterval(function(){
          num--;
          Fadeflag = false;
          obj.style.opacity = num/10;
          if (num<=0) {
            clearInterval(st);
            Fadeflag = true;
          }
        },30);
      }
    }

    next()
</script>
</body>
</html>
